<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>教室活动分享</title>
    <link rel="stylesheet" href="http://apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.min.css">
    <script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="http://apps.bdimg.com/libs/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script>
        $(document).ready(function(){
            function setCookie(c_name,value,expiredays)
            {
                var exdate=new Date();
                exdate.setDate(exdate.getDate()+expiredays);
                document.cookie=c_name+ "=" +escape(value)+
                        ((expiredays==null) ? "" : ";expires="+exdate.toGMTString())
            }
            setCookie('yc_user_id', '549ccbf3caad9301429c88a6', -1);
        });

        var clickThis = function(){
            var cookies = decodeURIComponent(document.cookie);
            if (cookies.indexOf('yc_user_id') !== -1 || cookies.indexOf('yc user id') !== -1){
//                match user id
                if (cookies.match(/yc_?user_?id.+?;/)){
                    var userInfo = cookies.match(/yc_?user_?id.+?;/)[0];
                    var userId = userInfo.split('=')[1];
                    userId = userId.split(';')[0];
                }
                else if (cookies.match(/yc_?user_?id.+?$/)){
                    var userInfo = cookies.match(/yc_?user_?id.+?$/)[0];
                    var userId= userInfo.split('=')[1];
                }

                var templateURL = 'http://localhost:2413/share/';
//                share right now watching video number
                var sharingVideo = 1;
                var fullURL = templateURL + userId + '/?shareVideo=' + sharingVideo;
                location.href = fullURL;
            }
            else {
                $('#myModal').modal();
            }
        };
    </script>
</head>
<body>
    <a id="ss" class="btn btn-primary btn-lg" onclick="clickThis()">分享</a>
    <!-- modal paddel -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog"
         aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close"
                            data-dismiss="modal" aria-hidden="true">
                        &times;
                    </button>
                    <h4 class="modal-title" id="myModalLabel">
                        教师活动分享 | 洋葱数学
                    </h4>
                </div>
                <div class="modal-body">
                    您需要成为洋葱数学教师用户才能进行分享。
                </div>
                <div class="modal-footer" style="border-top: none;">
                    <a class="btn btn-primary" href="http://yangcong345.com/signup">
                        去注册
                    </a>
                </div>
            </div><!-- /.modal-content -->
        </div>
</body>
</html>